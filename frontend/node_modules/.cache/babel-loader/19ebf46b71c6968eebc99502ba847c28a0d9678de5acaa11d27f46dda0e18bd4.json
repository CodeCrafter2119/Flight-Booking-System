{"ast":null,"code":"import React,{useState}from'react';import{urlAPI}from'../api/ApiClient';// Your axios instance (this would typically be in a separate file)\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RazorpayPayment=_ref=>{let{orderDetails}=_ref;// Safe destructuring with defaults\nconst{orderId='order_R84ki3Ddhyr9WN',amount=900000,currency='INR'}=orderDetails||{};const[isProcessing,setIsProcessing]=useState(false);const handlePayment=async()=>{if(!orderId){alert('Order information is missing');return;}setIsProcessing(true);try{// Check if Razorpay is already loaded\nif(!window.Razorpay){const script=document.createElement('script');script.src=\"https://checkout.razorpay.com/v1/checkout.js\";script.async=true;document.body.appendChild(script);script.onload=initializeRazorpay;}else{initializeRazorpay();}}catch(error){console.error('Payment initialization failed:',error);alert('Failed to initialize payment');setIsProcessing(false);}};const initializeRazorpay=()=>{const options={key:\"rzp_test_l5MXTWsTyrUqwN\",amount:amount,currency:currency,order_id:orderId,name:\"Flight Booking\",description:\"Payment for your booking\",handler:async function(response){try{// Using your urlAPI instance instead of direct axios call\nawait urlAPI.post('/payment/confirm-booking',{orderId:response.razorpay_order_id,paymentId:response.razorpay_payment_id,signature:response.razorpay_signature});alert('Payment successful! Booking confirmed.');}catch(error){console.error('Confirmation failed:',error);alert('Payment succeeded but confirmation failed. Please contact support.');}finally{setIsProcessing(false);}},prefill:{name:\"Passenger Name\",email:\"passenger@example.com\",contact:\"9876543210\"},theme:{color:\"#3399cc\"}};const rzp=new window.Razorpay(options);rzp.on('payment.failed',response=>{alert(`Payment failed: ${response.error.description}`);setIsProcessing(false);});rzp.open();};return/*#__PURE__*/_jsxs(\"div\",{className:\"payment-container\",style:styles.container,children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.heading,children:\"Complete Payment\"}),/*#__PURE__*/_jsxs(\"p\",{style:styles.text,children:[\"Order ID: \",orderId]}),/*#__PURE__*/_jsxs(\"p\",{style:styles.text,children:[\"Amount: \\u20B9\",(amount/100).toLocaleString('en-IN')]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePayment,className:\"pay-button\",style:isProcessing?styles.buttonProcessing:styles.button,disabled:isProcessing,children:isProcessing?'Processing...':'Pay Now'})]});};// Prop type validation\n// Inline styles for the component\nconst styles={container:{padding:'20px',border:'1px solid #ddd',borderRadius:'8px',maxWidth:'400px',margin:'20px auto',fontFamily:'Arial, sans-serif',backgroundColor:'#f9f9f9'},heading:{color:'#333',marginTop:'0'},text:{color:'#555',margin:'10px 0'},button:{backgroundColor:'#3399cc',color:'white',border:'none',padding:'12px 20px',borderRadius:'4px',cursor:'pointer',fontSize:'16px',fontWeight:'bold',width:'100%'},buttonProcessing:{backgroundColor:'#999',color:'white',border:'none',padding:'12px 20px',borderRadius:'4px',cursor:'not-allowed',fontSize:'16px',fontWeight:'bold',width:'100%'}};export default RazorpayPayment;","map":{"version":3,"names":["React","useState","urlAPI","jsx","_jsx","jsxs","_jsxs","RazorpayPayment","_ref","orderDetails","orderId","amount","currency","isProcessing","setIsProcessing","handlePayment","alert","window","Razorpay","script","document","createElement","src","async","body","appendChild","onload","initializeRazorpay","error","console","options","key","order_id","name","description","handler","response","post","razorpay_order_id","paymentId","razorpay_payment_id","signature","razorpay_signature","prefill","email","contact","theme","color","rzp","on","open","className","style","styles","container","children","heading","text","toLocaleString","onClick","buttonProcessing","button","disabled","padding","border","borderRadius","maxWidth","margin","fontFamily","backgroundColor","marginTop","cursor","fontSize","fontWeight","width"],"sources":["C:/SPRING-BOOT/FlightFrontend/booked-frontend/src/components/RazorpayPayment.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { urlAPI } from '../api/ApiClient';\r\n\r\n// Your axios instance (this would typically be in a separate file)\r\n\r\nconst RazorpayPayment = ({ orderDetails }) => {\r\n  // Safe destructuring with defaults\r\n  const { \r\n    orderId = 'order_R84ki3Ddhyr9WN', \r\n    amount = 900000, \r\n    currency = 'INR' \r\n  } = orderDetails || {};\r\n\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n  const handlePayment = async () => {\r\n    if (!orderId) {\r\n      alert('Order information is missing');\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    \r\n    try {\r\n      // Check if Razorpay is already loaded\r\n      if (!window.Razorpay) {\r\n        const script = document.createElement('script');\r\n        script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n        \r\n        script.onload = initializeRazorpay;\r\n      } else {\r\n        initializeRazorpay();\r\n      }\r\n    } catch (error) {\r\n      console.error('Payment initialization failed:', error);\r\n      alert('Failed to initialize payment');\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const initializeRazorpay = () => {\r\n    const options = {\r\n      key: \"rzp_test_l5MXTWsTyrUqwN\",\r\n      amount: amount,\r\n      currency: currency,\r\n      order_id: orderId,\r\n      name: \"Flight Booking\",\r\n      description: \"Payment for your booking\",\r\n      handler: async function(response) {\r\n        try {\r\n          // Using your urlAPI instance instead of direct axios call\r\n          await urlAPI.post('/payment/confirm-booking', {\r\n            orderId: response.razorpay_order_id,\r\n            paymentId: response.razorpay_payment_id,\r\n            signature: response.razorpay_signature\r\n          });\r\n          alert('Payment successful! Booking confirmed.');\r\n        } catch (error) {\r\n          console.error('Confirmation failed:', error);\r\n          alert('Payment succeeded but confirmation failed. Please contact support.');\r\n        } finally {\r\n          setIsProcessing(false);\r\n        }\r\n      },\r\n      prefill: {\r\n        name: \"Passenger Name\",\r\n        email: \"passenger@example.com\",\r\n        contact: \"9876543210\"\r\n      },\r\n      theme: {\r\n        color: \"#3399cc\"\r\n      }\r\n    };\r\n\r\n    const rzp = new window.Razorpay(options);\r\n    rzp.on('payment.failed', (response) => {\r\n      alert(`Payment failed: ${response.error.description}`);\r\n      setIsProcessing(false);\r\n    });\r\n    rzp.open();\r\n  };\r\n\r\n  return (\r\n    <div className=\"payment-container\" style={styles.container}>\r\n      <h3 style={styles.heading}>Complete Payment</h3>\r\n      <p style={styles.text}>Order ID: {orderId}</p>\r\n      <p style={styles.text}>Amount: â‚¹{(amount / 100).toLocaleString('en-IN')}</p>\r\n      <button \r\n        onClick={handlePayment} \r\n        className=\"pay-button\"\r\n        style={isProcessing ? styles.buttonProcessing : styles.button}\r\n        disabled={isProcessing}\r\n      >\r\n        {isProcessing ? 'Processing...' : 'Pay Now'}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Prop type validation\r\nRazorpayPayment.propTypes = {\r\n  orderDetails: PropTypes.shape({\r\n    orderId: PropTypes.string.isRequired,\r\n    amount: PropTypes.number.isRequired,\r\n    currency: PropTypes.string\r\n  }).isRequired\r\n};\r\n\r\n// Inline styles for the component\r\nconst styles = {\r\n  container: {\r\n    padding: '20px',\r\n    border: '1px solid #ddd',\r\n    borderRadius: '8px',\r\n    maxWidth: '400px',\r\n    margin: '20px auto',\r\n    fontFamily: 'Arial, sans-serif',\r\n    backgroundColor: '#f9f9f9'\r\n  },\r\n  heading: {\r\n    color: '#333',\r\n    marginTop: '0'\r\n  },\r\n  text: {\r\n    color: '#555',\r\n    margin: '10px 0'\r\n  },\r\n  button: {\r\n    backgroundColor: '#3399cc',\r\n    color: 'white',\r\n    border: 'none',\r\n    padding: '12px 20px',\r\n    borderRadius: '4px',\r\n    cursor: 'pointer',\r\n    fontSize: '16px',\r\n    fontWeight: 'bold',\r\n    width: '100%'\r\n  },\r\n  buttonProcessing: {\r\n    backgroundColor: '#999',\r\n    color: 'white',\r\n    border: 'none',\r\n    padding: '12px 20px',\r\n    borderRadius: '4px',\r\n    cursor: 'not-allowed',\r\n    fontSize: '16px',\r\n    fontWeight: 'bold',\r\n    width: '100%'\r\n  }\r\n};\r\n\r\nexport default RazorpayPayment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}