{"ast":null,"code":"var _jsxFileName = \"C:\\\\SPRING-BOOT\\\\FlightFrontend\\\\booked-frontend\\\\src\\\\components\\\\RazorpayPayment.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\n// Your axios instance (this would typically be in a separate file)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RazorpayPayment = ({\n  orderDetails\n}) => {\n  _s();\n  // Safe destructuring with defaults\n  const {\n    orderId = 'order_R84ki3Ddhyr9WN',\n    amount = 900000,\n    currency = 'INR'\n  } = orderDetails || {};\n  const [isProcessing, setIsProcessing] = useState(false);\n  const handlePayment = async () => {\n    if (!orderId) {\n      alert('Order information is missing');\n      return;\n    }\n    setIsProcessing(true);\n    try {\n      // Check if Razorpay is already loaded\n      if (!window.Razorpay) {\n        const script = document.createElement('script');\n        script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\n        script.async = true;\n        document.body.appendChild(script);\n        script.onload = initializeRazorpay;\n      } else {\n        initializeRazorpay();\n      }\n    } catch (error) {\n      console.error('Payment initialization failed:', error);\n      alert('Failed to initialize payment');\n      setIsProcessing(false);\n    }\n  };\n  const initializeRazorpay = () => {\n    const options = {\n      key: \"rzp_test_l5MXTWsTyrUqwN\",\n      amount: amount,\n      currency: currency,\n      order_id: orderId,\n      name: \"Flight Booking\",\n      description: \"Payment for your booking\",\n      handler: async function (response) {\n        try {\n          // Using your urlAPI instance instead of direct axios call\n          await urlAPI.post('/payment/confirm-booking', {\n            orderId: response.razorpay_order_id,\n            paymentId: response.razorpay_payment_id,\n            signature: response.razorpay_signature\n          });\n          alert('Payment successful! Booking confirmed.');\n        } catch (error) {\n          console.error('Confirmation failed:', error);\n          alert('Payment succeeded but confirmation failed. Please contact support.');\n        } finally {\n          setIsProcessing(false);\n        }\n      },\n      prefill: {\n        name: \"Passenger Name\",\n        email: \"passenger@example.com\",\n        contact: \"9876543210\"\n      },\n      theme: {\n        color: \"#3399cc\"\n      }\n    };\n    const rzp = new window.Razorpay(options);\n    rzp.on('payment.failed', response => {\n      alert(`Payment failed: ${response.error.description}`);\n      setIsProcessing(false);\n    });\n    rzp.open();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-container\",\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: styles.heading,\n      children: \"Complete Payment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.text,\n      children: [\"Order ID: \", orderId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.text,\n      children: [\"Amount: \\u20B9\", (amount / 100).toLocaleString('en-IN')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePayment,\n      className: \"pay-button\",\n      style: isProcessing ? styles.buttonProcessing : styles.button,\n      disabled: isProcessing,\n      children: isProcessing ? 'Processing...' : 'Pay Now'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\n// Prop type validation\n_s(RazorpayPayment, \"23doSrFnpDt6GWBaV15L/gfAQhY=\");\n_c = RazorpayPayment;\nRazorpayPayment.propTypes = {\n  orderDetails: PropTypes.shape({\n    orderId: PropTypes.string.isRequired,\n    amount: PropTypes.number.isRequired,\n    currency: PropTypes.string\n  }).isRequired\n};\n\n// Inline styles for the component\nconst styles = {\n  container: {\n    padding: '20px',\n    border: '1px solid #ddd',\n    borderRadius: '8px',\n    maxWidth: '400px',\n    margin: '20px auto',\n    fontFamily: 'Arial, sans-serif',\n    backgroundColor: '#f9f9f9'\n  },\n  heading: {\n    color: '#333',\n    marginTop: '0'\n  },\n  text: {\n    color: '#555',\n    margin: '10px 0'\n  },\n  button: {\n    backgroundColor: '#3399cc',\n    color: 'white',\n    border: 'none',\n    padding: '12px 20px',\n    borderRadius: '4px',\n    cursor: 'pointer',\n    fontSize: '16px',\n    fontWeight: 'bold',\n    width: '100%'\n  },\n  buttonProcessing: {\n    backgroundColor: '#999',\n    color: 'white',\n    border: 'none',\n    padding: '12px 20px',\n    borderRadius: '4px',\n    cursor: 'not-allowed',\n    fontSize: '16px',\n    fontWeight: 'bold',\n    width: '100%'\n  }\n};\nexport default RazorpayPayment;\nvar _c;\n$RefreshReg$(_c, \"RazorpayPayment\");","map":{"version":3,"names":["React","useState","PropTypes","jsxDEV","_jsxDEV","RazorpayPayment","orderDetails","_s","orderId","amount","currency","isProcessing","setIsProcessing","handlePayment","alert","window","Razorpay","script","document","createElement","src","async","body","appendChild","onload","initializeRazorpay","error","console","options","key","order_id","name","description","handler","response","urlAPI","post","razorpay_order_id","paymentId","razorpay_payment_id","signature","razorpay_signature","prefill","email","contact","theme","color","rzp","on","open","className","style","styles","container","children","heading","fileName","_jsxFileName","lineNumber","columnNumber","text","toLocaleString","onClick","buttonProcessing","button","disabled","_c","propTypes","shape","string","isRequired","number","padding","border","borderRadius","maxWidth","margin","fontFamily","backgroundColor","marginTop","cursor","fontSize","fontWeight","width","$RefreshReg$"],"sources":["C:/SPRING-BOOT/FlightFrontend/booked-frontend/src/components/RazorpayPayment.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Your axios instance (this would typically be in a separate file)\r\n\r\nconst RazorpayPayment = ({ orderDetails }) => {\r\n  // Safe destructuring with defaults\r\n  const { \r\n    orderId = 'order_R84ki3Ddhyr9WN', \r\n    amount = 900000, \r\n    currency = 'INR' \r\n  } = orderDetails || {};\r\n\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n  const handlePayment = async () => {\r\n    if (!orderId) {\r\n      alert('Order information is missing');\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    \r\n    try {\r\n      // Check if Razorpay is already loaded\r\n      if (!window.Razorpay) {\r\n        const script = document.createElement('script');\r\n        script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n        \r\n        script.onload = initializeRazorpay;\r\n      } else {\r\n        initializeRazorpay();\r\n      }\r\n    } catch (error) {\r\n      console.error('Payment initialization failed:', error);\r\n      alert('Failed to initialize payment');\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const initializeRazorpay = () => {\r\n    const options = {\r\n      key: \"rzp_test_l5MXTWsTyrUqwN\",\r\n      amount: amount,\r\n      currency: currency,\r\n      order_id: orderId,\r\n      name: \"Flight Booking\",\r\n      description: \"Payment for your booking\",\r\n      handler: async function(response) {\r\n        try {\r\n          // Using your urlAPI instance instead of direct axios call\r\n          await urlAPI.post('/payment/confirm-booking', {\r\n            orderId: response.razorpay_order_id,\r\n            paymentId: response.razorpay_payment_id,\r\n            signature: response.razorpay_signature\r\n          });\r\n          alert('Payment successful! Booking confirmed.');\r\n        } catch (error) {\r\n          console.error('Confirmation failed:', error);\r\n          alert('Payment succeeded but confirmation failed. Please contact support.');\r\n        } finally {\r\n          setIsProcessing(false);\r\n        }\r\n      },\r\n      prefill: {\r\n        name: \"Passenger Name\",\r\n        email: \"passenger@example.com\",\r\n        contact: \"9876543210\"\r\n      },\r\n      theme: {\r\n        color: \"#3399cc\"\r\n      }\r\n    };\r\n\r\n    const rzp = new window.Razorpay(options);\r\n    rzp.on('payment.failed', (response) => {\r\n      alert(`Payment failed: ${response.error.description}`);\r\n      setIsProcessing(false);\r\n    });\r\n    rzp.open();\r\n  };\r\n\r\n  return (\r\n    <div className=\"payment-container\" style={styles.container}>\r\n      <h3 style={styles.heading}>Complete Payment</h3>\r\n      <p style={styles.text}>Order ID: {orderId}</p>\r\n      <p style={styles.text}>Amount: â‚¹{(amount / 100).toLocaleString('en-IN')}</p>\r\n      <button \r\n        onClick={handlePayment} \r\n        className=\"pay-button\"\r\n        style={isProcessing ? styles.buttonProcessing : styles.button}\r\n        disabled={isProcessing}\r\n      >\r\n        {isProcessing ? 'Processing...' : 'Pay Now'}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Prop type validation\r\nRazorpayPayment.propTypes = {\r\n  orderDetails: PropTypes.shape({\r\n    orderId: PropTypes.string.isRequired,\r\n    amount: PropTypes.number.isRequired,\r\n    currency: PropTypes.string\r\n  }).isRequired\r\n};\r\n\r\n// Inline styles for the component\r\nconst styles = {\r\n  container: {\r\n    padding: '20px',\r\n    border: '1px solid #ddd',\r\n    borderRadius: '8px',\r\n    maxWidth: '400px',\r\n    margin: '20px auto',\r\n    fontFamily: 'Arial, sans-serif',\r\n    backgroundColor: '#f9f9f9'\r\n  },\r\n  heading: {\r\n    color: '#333',\r\n    marginTop: '0'\r\n  },\r\n  text: {\r\n    color: '#555',\r\n    margin: '10px 0'\r\n  },\r\n  button: {\r\n    backgroundColor: '#3399cc',\r\n    color: 'white',\r\n    border: 'none',\r\n    padding: '12px 20px',\r\n    borderRadius: '4px',\r\n    cursor: 'pointer',\r\n    fontSize: '16px',\r\n    fontWeight: 'bold',\r\n    width: '100%'\r\n  },\r\n  buttonProcessing: {\r\n    backgroundColor: '#999',\r\n    color: 'white',\r\n    border: 'none',\r\n    padding: '12px 20px',\r\n    borderRadius: '4px',\r\n    cursor: 'not-allowed',\r\n    fontSize: '16px',\r\n    fontWeight: 'bold',\r\n    width: '100%'\r\n  }\r\n};\r\n\r\nexport default RazorpayPayment;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,SAAS,MAAM,YAAY;;AAElC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEA,MAAMC,eAAe,GAAGA,CAAC;EAAEC;AAAa,CAAC,KAAK;EAAAC,EAAA;EAC5C;EACA,MAAM;IACJC,OAAO,GAAG,sBAAsB;IAChCC,MAAM,GAAG,MAAM;IACfC,QAAQ,GAAG;EACb,CAAC,GAAGJ,YAAY,IAAI,CAAC,CAAC;EAEtB,MAAM,CAACK,YAAY,EAAEC,eAAe,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAEvD,MAAMY,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI,CAACL,OAAO,EAAE;MACZM,KAAK,CAAC,8BAA8B,CAAC;MACrC;IACF;IAEAF,eAAe,CAAC,IAAI,CAAC;IAErB,IAAI;MACF;MACA,IAAI,CAACG,MAAM,CAACC,QAAQ,EAAE;QACpB,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;QAC/CF,MAAM,CAACG,GAAG,GAAG,8CAA8C;QAC3DH,MAAM,CAACI,KAAK,GAAG,IAAI;QACnBH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,MAAM,CAAC;QAEjCA,MAAM,CAACO,MAAM,GAAGC,kBAAkB;MACpC,CAAC,MAAM;QACLA,kBAAkB,CAAC,CAAC;MACtB;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtDZ,KAAK,CAAC,8BAA8B,CAAC;MACrCF,eAAe,CAAC,KAAK,CAAC;IACxB;EACF,CAAC;EAED,MAAMa,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,MAAMG,OAAO,GAAG;MACdC,GAAG,EAAE,yBAAyB;MAC9BpB,MAAM,EAAEA,MAAM;MACdC,QAAQ,EAAEA,QAAQ;MAClBoB,QAAQ,EAAEtB,OAAO;MACjBuB,IAAI,EAAE,gBAAgB;MACtBC,WAAW,EAAE,0BAA0B;MACvCC,OAAO,EAAE,eAAAA,CAAeC,QAAQ,EAAE;QAChC,IAAI;UACF;UACA,MAAMC,MAAM,CAACC,IAAI,CAAC,0BAA0B,EAAE;YAC5C5B,OAAO,EAAE0B,QAAQ,CAACG,iBAAiB;YACnCC,SAAS,EAAEJ,QAAQ,CAACK,mBAAmB;YACvCC,SAAS,EAAEN,QAAQ,CAACO;UACtB,CAAC,CAAC;UACF3B,KAAK,CAAC,wCAAwC,CAAC;QACjD,CAAC,CAAC,OAAOY,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;UAC5CZ,KAAK,CAAC,oEAAoE,CAAC;QAC7E,CAAC,SAAS;UACRF,eAAe,CAAC,KAAK,CAAC;QACxB;MACF,CAAC;MACD8B,OAAO,EAAE;QACPX,IAAI,EAAE,gBAAgB;QACtBY,KAAK,EAAE,uBAAuB;QAC9BC,OAAO,EAAE;MACX,CAAC;MACDC,KAAK,EAAE;QACLC,KAAK,EAAE;MACT;IACF,CAAC;IAED,MAAMC,GAAG,GAAG,IAAIhC,MAAM,CAACC,QAAQ,CAACY,OAAO,CAAC;IACxCmB,GAAG,CAACC,EAAE,CAAC,gBAAgB,EAAGd,QAAQ,IAAK;MACrCpB,KAAK,CAAC,mBAAmBoB,QAAQ,CAACR,KAAK,CAACM,WAAW,EAAE,CAAC;MACtDpB,eAAe,CAAC,KAAK,CAAC;IACxB,CAAC,CAAC;IACFmC,GAAG,CAACE,IAAI,CAAC,CAAC;EACZ,CAAC;EAED,oBACE7C,OAAA;IAAK8C,SAAS,EAAC,mBAAmB;IAACC,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,gBACzDlD,OAAA;MAAI+C,KAAK,EAAEC,MAAM,CAACG,OAAQ;MAAAD,QAAA,EAAC;IAAgB;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAChDvD,OAAA;MAAG+C,KAAK,EAAEC,MAAM,CAACQ,IAAK;MAAAN,QAAA,GAAC,YAAU,EAAC9C,OAAO;IAAA;MAAAgD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC9CvD,OAAA;MAAG+C,KAAK,EAAEC,MAAM,CAACQ,IAAK;MAAAN,QAAA,GAAC,gBAAS,EAAC,CAAC7C,MAAM,GAAG,GAAG,EAAEoD,cAAc,CAAC,OAAO,CAAC;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC5EvD,OAAA;MACE0D,OAAO,EAAEjD,aAAc;MACvBqC,SAAS,EAAC,YAAY;MACtBC,KAAK,EAAExC,YAAY,GAAGyC,MAAM,CAACW,gBAAgB,GAAGX,MAAM,CAACY,MAAO;MAC9DC,QAAQ,EAAEtD,YAAa;MAAA2C,QAAA,EAEtB3C,YAAY,GAAG,eAAe,GAAG;IAAS;MAAA6C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV,CAAC;;AAED;AAAApD,EAAA,CAhGMF,eAAe;AAAA6D,EAAA,GAAf7D,eAAe;AAiGrBA,eAAe,CAAC8D,SAAS,GAAG;EAC1B7D,YAAY,EAAEJ,SAAS,CAACkE,KAAK,CAAC;IAC5B5D,OAAO,EAAEN,SAAS,CAACmE,MAAM,CAACC,UAAU;IACpC7D,MAAM,EAAEP,SAAS,CAACqE,MAAM,CAACD,UAAU;IACnC5D,QAAQ,EAAER,SAAS,CAACmE;EACtB,CAAC,CAAC,CAACC;AACL,CAAC;;AAED;AACA,MAAMlB,MAAM,GAAG;EACbC,SAAS,EAAE;IACTmB,OAAO,EAAE,MAAM;IACfC,MAAM,EAAE,gBAAgB;IACxBC,YAAY,EAAE,KAAK;IACnBC,QAAQ,EAAE,OAAO;IACjBC,MAAM,EAAE,WAAW;IACnBC,UAAU,EAAE,mBAAmB;IAC/BC,eAAe,EAAE;EACnB,CAAC;EACDvB,OAAO,EAAE;IACPT,KAAK,EAAE,MAAM;IACbiC,SAAS,EAAE;EACb,CAAC;EACDnB,IAAI,EAAE;IACJd,KAAK,EAAE,MAAM;IACb8B,MAAM,EAAE;EACV,CAAC;EACDZ,MAAM,EAAE;IACNc,eAAe,EAAE,SAAS;IAC1BhC,KAAK,EAAE,OAAO;IACd2B,MAAM,EAAE,MAAM;IACdD,OAAO,EAAE,WAAW;IACpBE,YAAY,EAAE,KAAK;IACnBM,MAAM,EAAE,SAAS;IACjBC,QAAQ,EAAE,MAAM;IAChBC,UAAU,EAAE,MAAM;IAClBC,KAAK,EAAE;EACT,CAAC;EACDpB,gBAAgB,EAAE;IAChBe,eAAe,EAAE,MAAM;IACvBhC,KAAK,EAAE,OAAO;IACd2B,MAAM,EAAE,MAAM;IACdD,OAAO,EAAE,WAAW;IACpBE,YAAY,EAAE,KAAK;IACnBM,MAAM,EAAE,aAAa;IACrBC,QAAQ,EAAE,MAAM;IAChBC,UAAU,EAAE,MAAM;IAClBC,KAAK,EAAE;EACT;AACF,CAAC;AAED,eAAe9E,eAAe;AAAC,IAAA6D,EAAA;AAAAkB,YAAA,CAAAlB,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}