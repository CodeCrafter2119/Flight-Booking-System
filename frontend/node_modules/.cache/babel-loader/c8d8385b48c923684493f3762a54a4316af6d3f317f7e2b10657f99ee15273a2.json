{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useLocation,useNavigate}from'react-router-dom';import{Client}from'@stomp/stompjs';import SockJS from'sockjs-client';import'./SeatSelection.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SeatSelectionPage=()=>{var _location$state,_location$state2;const location=useLocation();const navigate=useNavigate();const[bookingDetails,setBookingDetails]=useState(((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.bookingDetails)||null);const[passengerCount,setPassengerCount]=useState(((_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.passengerCount)||1);const[selectedSeats,setSelectedSeats]=useState([]);const[unavailableSeats,setUnavailableSeats]=useState(new Set());const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[connected,setConnected]=useState(false);const[debugInfo,setDebugInfo]=useState('Initializing...');const stompClient=useRef(null);const seatPrice=500;const userId=localStorage.getItem('userId')||'user_'+Math.random().toString(36).substr(2,9);// Seat configuration\nconst rows=10;const seatsPerRow=6;const seatLetters=['A','B','C','D','E','F'];useEffect(()=>{if(!bookingDetails){navigate('/flights');return;}initializeWebSocket();return()=>{if(stompClient.current){stompClient.current.deactivate();console.log('WebSocket connection closed');}};},[bookingDetails]);const initializeWebSocket=()=>{const flightIdNum=Number(bookingDetails.flightId);if(isNaN(flightIdNum)){setError('Invalid flight ID format');return;}// Clear previous connection\nif(stompClient.current){stompClient.current.deactivate();}setDebugInfo('Connecting to WebSocket server...');setError('');try{stompClient.current=new Client({webSocketFactory:()=>new SockJS('http://Flight-booking-project-env.eba-wch9wyrn.ap-south-1.elasticbeanstalk.com/ws'),reconnectDelay:5000,heartbeatIncoming:4000,heartbeatOutgoing:4000,debug:function(str){if(str.includes('ERROR')||str.includes('Close')){console.log('STOMP:',str);}},onConnect:frame=>{console.log('✅ WebSocket connected successfully!',frame);setConnected(true);setError('');setDebugInfo('Connected! Subscribing to seat updates...');// Subscribe to seat updates for this flight\nstompClient.current.subscribe(`/topic/flight/${flightIdNum}/seats`,message=>{console.log('Received seat update:',message.body);try{const updatedUnavailableSeats=JSON.parse(message.body);setUnavailableSeats(new Set(updatedUnavailableSeats));setDebugInfo(`Seat data updated: ${updatedUnavailableSeats.length} unavailable seats`);}catch(e){console.error('Error parsing seat data:',e);setDebugInfo('Error parsing seat data');}});// Request initial unavailable seats\nconsole.log('Requesting initial seat data for flight:',flightIdNum);stompClient.current.publish({destination:`/app/flight/${flightIdNum}/seats`,body:JSON.stringify({})});},onStompError:frame=>{var _frame$headers;console.error('❌ STOMP error:',frame);setConnected(false);setError(`STOMP protocol error: ${((_frame$headers=frame.headers)===null||_frame$headers===void 0?void 0:_frame$headers.message)||'Unknown error'}`);setDebugInfo(`STOMP Error: ${JSON.stringify(frame)}`);},onWebSocketError:event=>{console.error('❌ WebSocket error:',event);setConnected(false);setError('WebSocket connection failed');setDebugInfo(`WebSocket Error: ${event.type}. Server is running but WebSocket might be misconfigured.`);},onDisconnect:frame=>{console.log('WebSocket disconnected:',frame);setConnected(false);setDebugInfo('Disconnected from server');}});// Activate the connection\nstompClient.current.activate();}catch(error){console.error('❌ WebSocket initialization failed:',error);setError(`Failed to initialize WebSocket: ${error.message}`);setDebugInfo(`Initialization Error: ${error.message}`);setConnected(false);}};const handleSeatSelect=seatNumber=>{if(unavailableSeats.has(seatNumber)){console.log('Seat is unavailable:',seatNumber);return;}setSelectedSeats(prev=>{if(prev.includes(seatNumber)){// Deselect seat\nif(connected){releaseSeat(seatNumber);}return prev.filter(seat=>seat!==seatNumber);}else if(prev.length<passengerCount){// Select seat\nif(connected){reserveSeat(seatNumber);}return[...prev,seatNumber];}return prev;});};const reserveSeat=seatNumber=>{if(stompClient.current&&connected&&bookingDetails){try{console.log('Reserving seat:',seatNumber);const flightIdNum=Number(bookingDetails.flightId);const reservationRequest={flightId:flightIdNum,seatNumber:seatNumber,userId:userId};stompClient.current.publish({destination:'/app/reserve-seat',body:JSON.stringify(reservationRequest)});}catch(error){console.error('Error reserving seat:',error);setError('Failed to reserve seat. Please try again.');}}};const releaseSeat=seatNumber=>{if(stompClient.current&&connected&&bookingDetails){try{console.log('Releasing seat:',seatNumber);const flightIdNum=Number(bookingDetails.flightId);const reservationRequest={flightId:flightIdNum,seatNumber:seatNumber,userId:userId};stompClient.current.publish({destination:'/app/release-seat',body:JSON.stringify(reservationRequest)});}catch(error){console.error('Error releasing seat:',error);}}};const handleConfirmSeats=async()=>{if(selectedSeats.length!==passengerCount){setError(`Please select exactly ${passengerCount} seat(s)`);return;}try{setLoading(true);// Navigate to payment page with selected seats\nnavigate(`/flights/booking/${bookingDetails.id}`,{state:{bookingDetails:{...bookingDetails,selectedSeats:selectedSeats,seatCharges:selectedSeats.length*seatPrice,totalAmount:(bookingDetails.totalAmount||0)+selectedSeats.length*seatPrice},selectedSeats,seatCharges:selectedSeats.length*seatPrice}});}catch(err){setError('Failed to proceed to payment');console.error('Navigation error:',err);}finally{setLoading(false);}};// Function to convert seat number to display format (e.g., 1 -> \"1A\")\nconst getSeatDisplay=seatNumber=>{const row=Math.floor((seatNumber-1)/seatsPerRow)+1;const seatIndex=(seatNumber-1)%seatsPerRow;return`${row}${seatLetters[seatIndex]}`;};// Render the actual seat map\nconst renderSeatMap=()=>{const seatMap=[];// Add cockpit area\nseatMap.push(/*#__PURE__*/_jsx(\"div\",{className:\"cockpit-area\",children:/*#__PURE__*/_jsx(\"div\",{className:\"cockpit\",children:\"Cockpit\"})},\"cockpit\"));// Add seat rows\nfor(let row=1;row<=rows;row++){const rowSeats=[];// Left side seats (A, B, C)\nfor(let seat=1;seat<=3;seat++){const seatNumber=(row-1)*seatsPerRow+seat;const seatLabel=`${row}${seatLetters[seat-1]}`;const isUnavailable=unavailableSeats.has(seatNumber);const isSelected=selectedSeats.includes(seatNumber);const isEmergencyExit=row===1||row===rows;rowSeats.push(/*#__PURE__*/_jsx(\"div\",{className:`seat ${isUnavailable?'booked':''} ${isSelected?'selected':''} ${isEmergencyExit?'emergency':''}`,onClick:()=>!isUnavailable&&handleSeatSelect(seatNumber),title:isUnavailable?'Already booked':`Seat ${seatLabel}`,children:seatLabel},`left-${seatNumber}`));}// Aisle\nrowSeats.push(/*#__PURE__*/_jsx(\"div\",{className:\"aisle\"},`aisle-${row}`));// Right side seats (D, E, F)\nfor(let seat=4;seat<=6;seat++){const seatNumber=(row-1)*seatsPerRow+seat;const seatLabel=`${row}${seatLetters[seat-1]}`;const isUnavailable=unavailableSeats.has(seatNumber);const isSelected=selectedSeats.includes(seatNumber);const isEmergencyExit=row===1||row===rows;rowSeats.push(/*#__PURE__*/_jsx(\"div\",{className:`seat ${isUnavailable?'booked':''} ${isSelected?'selected':''} ${isEmergencyExit?'emergency':''}`,onClick:()=>!isUnavailable&&handleSeatSelect(seatNumber),title:isUnavailable?'Already booked':`Seat ${seatLabel}`,children:seatLabel},`right-${seatNumber}`));}seatMap.push(/*#__PURE__*/_jsx(\"div\",{className:\"seat-row\",children:rowSeats},`row-${row}`));}return seatMap;};if(!bookingDetails){return/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No Booking Information\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No booking information found. Please start over.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/flights'),className:\"retry-button\",children:\"Back to Flights\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"seat-selection-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Select Your Seats\"}),bookingDetails&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Flight \",bookingDetails.flightNumber,\" - \",bookingDetails.departureFrom,\" to \",bookingDetails.arrivalTo]}),/*#__PURE__*/_jsxs(\"div\",{className:`connection-status ${connected?'connected':'disconnected'}`,children:[connected?'✅ Connected':'❌ Disconnected',/*#__PURE__*/_jsx(\"button\",{onClick:initializeWebSocket,className:\"retry-btn\",children:\"Retry Connection\"})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error]}),/*#__PURE__*/_jsxs(\"div\",{className:\"debug-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Connection Status\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Flight ID:\"}),\" \",bookingDetails.flightId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"WebSocket Status:\"}),\" \",connected?'Connected':'Disconnected']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Server URL:\"}),\" http://Flight-booking-project-env.eba-wch9wyrn.ap-south-1.elasticbeanstalk.com/ws\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Debug Info:\"}),\" \",debugInfo]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Unavailable Seats:\"}),\" \",Array.from(unavailableSeats).join(', ')||'None']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Booking Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Booking Reference:\"}),\" \",bookingDetails.bookingReference]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Passengers:\"}),\" \",passengerCount]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Flight Date:\"}),\" \",bookingDetails.departureDate||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Departure Time:\"}),\" \",bookingDetails.departureTime||'N/A']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"seat-selection-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"airplane-layout\",children:/*#__PURE__*/_jsx(\"div\",{className:\"airplane\",children:renderSeatMap()})}),/*#__PURE__*/_jsxs(\"div\",{className:\"selection-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"seat-legend\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Seat Legend\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"seat available\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Available\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"seat selected\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Selected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"seat booked\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Unavailable\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"seat emergency\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Emergency Exit\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"selected-seats-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Your Selection\"}),selectedSeats.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Selected Seats: \",selectedSeats.map(seat=>getSeatDisplay(seat)).join(', ')]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Seat Charges: \\u20B9\",selectedSeats.length*seatPrice]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No seats selected yet\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-back\",onClick:()=>navigate(-1),disabled:loading,children:\"Back to Booking\"}),/*#__PURE__*/_jsx(\"button\",{className:`btn-confirm ${selectedSeats.length===passengerCount?'':'disabled'}`,onClick:handleConfirmSeats,disabled:selectedSeats.length!==passengerCount||loading,children:loading?'Processing...':`Confirm ${selectedSeats.length}/${passengerCount} Seats`})]}),!connected&&/*#__PURE__*/_jsxs(\"div\",{className:\"connection-warning\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u26A0\\uFE0F WebSocket not connected. Seat availability may not be accurate.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You can still select seats and proceed to payment.\"})]})]})]})]})});};export default SeatSelectionPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useLocation","useNavigate","Client","SockJS","jsx","_jsx","jsxs","_jsxs","SeatSelectionPage","_location$state","_location$state2","location","navigate","bookingDetails","setBookingDetails","state","passengerCount","setPassengerCount","selectedSeats","setSelectedSeats","unavailableSeats","setUnavailableSeats","Set","loading","setLoading","error","setError","connected","setConnected","debugInfo","setDebugInfo","stompClient","seatPrice","userId","localStorage","getItem","Math","random","toString","substr","rows","seatsPerRow","seatLetters","initializeWebSocket","current","deactivate","console","log","flightIdNum","Number","flightId","isNaN","webSocketFactory","reconnectDelay","heartbeatIncoming","heartbeatOutgoing","debug","str","includes","onConnect","frame","subscribe","message","body","updatedUnavailableSeats","JSON","parse","length","e","publish","destination","stringify","onStompError","_frame$headers","headers","onWebSocketError","event","type","onDisconnect","activate","handleSeatSelect","seatNumber","has","prev","releaseSeat","filter","seat","reserveSeat","reservationRequest","handleConfirmSeats","id","seatCharges","totalAmount","err","getSeatDisplay","row","floor","seatIndex","renderSeatMap","seatMap","push","className","children","rowSeats","seatLabel","isUnavailable","isSelected","isEmergencyExit","onClick","title","flightNumber","departureFrom","arrivalTo","Array","from","join","bookingReference","departureDate","departureTime","map","disabled"],"sources":["C:/SPRING-BOOT/FlightFrontend/booked-frontend/src/components/SeatSelectionPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Client } from '@stomp/stompjs';\r\nimport SockJS from 'sockjs-client';\r\nimport './SeatSelection.css';\r\n\r\nconst SeatSelectionPage = () => {\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    \r\n    const [bookingDetails, setBookingDetails] = useState(location.state?.bookingDetails || null);\r\n    const [passengerCount, setPassengerCount] = useState(location.state?.passengerCount || 1);\r\n    const [selectedSeats, setSelectedSeats] = useState([]);\r\n    const [unavailableSeats, setUnavailableSeats] = useState(new Set());\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [connected, setConnected] = useState(false);\r\n    const [debugInfo, setDebugInfo] = useState('Initializing...');\r\n    \r\n    const stompClient = useRef(null);\r\n    const seatPrice = 500;\r\n    const userId = localStorage.getItem('userId') || 'user_' + Math.random().toString(36).substr(2, 9);\r\n\r\n    // Seat configuration\r\n    const rows = 10;\r\n    const seatsPerRow = 6;\r\n    const seatLetters = ['A', 'B', 'C', 'D', 'E', 'F'];\r\n\r\n    useEffect(() => {\r\n        if (!bookingDetails) {\r\n            navigate('/flights');\r\n            return;\r\n        }\r\n\r\n        initializeWebSocket();\r\n\r\n        return () => {\r\n            if (stompClient.current) {\r\n                stompClient.current.deactivate();\r\n                console.log('WebSocket connection closed');\r\n            }\r\n        };\r\n    }, [bookingDetails]);\r\n\r\n    const initializeWebSocket = () => {\r\n        const flightIdNum = Number(bookingDetails.flightId);\r\n        \r\n        if (isNaN(flightIdNum)) {\r\n            setError('Invalid flight ID format');\r\n            return;\r\n        }\r\n\r\n        // Clear previous connection\r\n        if (stompClient.current) {\r\n            stompClient.current.deactivate();\r\n        }\r\n\r\n        setDebugInfo('Connecting to WebSocket server...');\r\n        setError('');\r\n        \r\n        try {\r\n            stompClient.current = new Client({\r\n                webSocketFactory: () => new SockJS('http://Flight-booking-project-env.eba-wch9wyrn.ap-south-1.elasticbeanstalk.com/ws'),\r\n                reconnectDelay: 5000,\r\n                heartbeatIncoming: 4000,\r\n                heartbeatOutgoing: 4000,\r\n                \r\n                debug: function(str) {\r\n                    if (str.includes('ERROR') || str.includes('Close')) {\r\n                        console.log('STOMP:', str);\r\n                    }\r\n                },\r\n                \r\n                onConnect: (frame) => {\r\n                    console.log('✅ WebSocket connected successfully!', frame);\r\n                    setConnected(true);\r\n                    setError('');\r\n                    setDebugInfo('Connected! Subscribing to seat updates...');\r\n                    \r\n                    // Subscribe to seat updates for this flight\r\n                    stompClient.current.subscribe(\r\n                        `/topic/flight/${flightIdNum}/seats`, \r\n                        (message) => {\r\n                            console.log('Received seat update:', message.body);\r\n                            try {\r\n                                const updatedUnavailableSeats = JSON.parse(message.body);\r\n                                setUnavailableSeats(new Set(updatedUnavailableSeats));\r\n                                setDebugInfo(`Seat data updated: ${updatedUnavailableSeats.length} unavailable seats`);\r\n                            } catch (e) {\r\n                                console.error('Error parsing seat data:', e);\r\n                                setDebugInfo('Error parsing seat data');\r\n                            }\r\n                        }\r\n                    );\r\n                    \r\n                    // Request initial unavailable seats\r\n                    console.log('Requesting initial seat data for flight:', flightIdNum);\r\n                    stompClient.current.publish({\r\n                        destination: `/app/flight/${flightIdNum}/seats`,\r\n                        body: JSON.stringify({})\r\n                    });\r\n                },\r\n                \r\n                onStompError: (frame) => {\r\n                    console.error('❌ STOMP error:', frame);\r\n                    setConnected(false);\r\n                    setError(`STOMP protocol error: ${frame.headers?.message || 'Unknown error'}`);\r\n                    setDebugInfo(`STOMP Error: ${JSON.stringify(frame)}`);\r\n                },\r\n                \r\n                onWebSocketError: (event) => {\r\n                    console.error('❌ WebSocket error:', event);\r\n                    setConnected(false);\r\n                    setError('WebSocket connection failed');\r\n                    setDebugInfo(`WebSocket Error: ${event.type}. Server is running but WebSocket might be misconfigured.`);\r\n                },\r\n                \r\n                onDisconnect: (frame) => {\r\n                    console.log('WebSocket disconnected:', frame);\r\n                    setConnected(false);\r\n                    setDebugInfo('Disconnected from server');\r\n                }\r\n            });\r\n            \r\n            // Activate the connection\r\n            stompClient.current.activate();\r\n            \r\n        } catch (error) {\r\n            console.error('❌ WebSocket initialization failed:', error);\r\n            setError(`Failed to initialize WebSocket: ${error.message}`);\r\n            setDebugInfo(`Initialization Error: ${error.message}`);\r\n            setConnected(false);\r\n        }\r\n    };\r\n\r\n    const handleSeatSelect = (seatNumber) => {\r\n        if (unavailableSeats.has(seatNumber)) {\r\n            console.log('Seat is unavailable:', seatNumber);\r\n            return;\r\n        }\r\n\r\n        setSelectedSeats(prev => {\r\n            if (prev.includes(seatNumber)) {\r\n                // Deselect seat\r\n                if (connected) {\r\n                    releaseSeat(seatNumber);\r\n                }\r\n                return prev.filter(seat => seat !== seatNumber);\r\n            } else if (prev.length < passengerCount) {\r\n                // Select seat\r\n                if (connected) {\r\n                    reserveSeat(seatNumber);\r\n                }\r\n                return [...prev, seatNumber];\r\n            }\r\n            return prev;\r\n        });\r\n    };\r\n\r\n    const reserveSeat = (seatNumber) => {\r\n        if (stompClient.current && connected && bookingDetails) {\r\n            try {\r\n                console.log('Reserving seat:', seatNumber);\r\n                const flightIdNum = Number(bookingDetails.flightId);\r\n                const reservationRequest = {\r\n                    flightId: flightIdNum,\r\n                    seatNumber: seatNumber,\r\n                    userId: userId\r\n                };\r\n                \r\n                stompClient.current.publish({\r\n                    destination: '/app/reserve-seat',\r\n                    body: JSON.stringify(reservationRequest)\r\n                });\r\n            } catch (error) {\r\n                console.error('Error reserving seat:', error);\r\n                setError('Failed to reserve seat. Please try again.');\r\n            }\r\n        }\r\n    };\r\n\r\n    const releaseSeat = (seatNumber) => {\r\n        if (stompClient.current && connected && bookingDetails) {\r\n            try {\r\n                console.log('Releasing seat:', seatNumber);\r\n                const flightIdNum = Number(bookingDetails.flightId);\r\n                const reservationRequest = {\r\n                    flightId: flightIdNum,\r\n                    seatNumber: seatNumber,\r\n                    userId: userId\r\n                };\r\n                \r\n                stompClient.current.publish({\r\n                    destination: '/app/release-seat',\r\n                    body: JSON.stringify(reservationRequest)\r\n                });\r\n            } catch (error) {\r\n                console.error('Error releasing seat:', error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleConfirmSeats = async () => {\r\n        if (selectedSeats.length !== passengerCount) {\r\n            setError(`Please select exactly ${passengerCount} seat(s)`);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            \r\n            // Navigate to payment page with selected seats\r\n            navigate(`/flights/booking/${bookingDetails.id}`, {\r\n                state: {\r\n                    bookingDetails: {\r\n                        ...bookingDetails,\r\n                        selectedSeats: selectedSeats,\r\n                        seatCharges: selectedSeats.length * seatPrice,\r\n                        totalAmount: (bookingDetails.totalAmount || 0) + (selectedSeats.length * seatPrice)\r\n                    },\r\n                    selectedSeats,\r\n                    seatCharges: selectedSeats.length * seatPrice\r\n                }\r\n            });\r\n            \r\n        } catch (err) {\r\n            setError('Failed to proceed to payment');\r\n            console.error('Navigation error:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Function to convert seat number to display format (e.g., 1 -> \"1A\")\r\n    const getSeatDisplay = (seatNumber) => {\r\n        const row = Math.floor((seatNumber - 1) / seatsPerRow) + 1;\r\n        const seatIndex = (seatNumber - 1) % seatsPerRow;\r\n        return `${row}${seatLetters[seatIndex]}`;\r\n    };\r\n\r\n    // Render the actual seat map\r\n    const renderSeatMap = () => {\r\n        const seatMap = [];\r\n        \r\n        // Add cockpit area\r\n        seatMap.push(\r\n            <div key=\"cockpit\" className=\"cockpit-area\">\r\n                <div className=\"cockpit\">Cockpit</div>\r\n            </div>\r\n        );\r\n        \r\n        // Add seat rows\r\n        for (let row = 1; row <= rows; row++) {\r\n            const rowSeats = [];\r\n            \r\n            // Left side seats (A, B, C)\r\n            for (let seat = 1; seat <= 3; seat++) {\r\n                const seatNumber = (row - 1) * seatsPerRow + seat;\r\n                const seatLabel = `${row}${seatLetters[seat - 1]}`;\r\n                const isUnavailable = unavailableSeats.has(seatNumber);\r\n                const isSelected = selectedSeats.includes(seatNumber);\r\n                const isEmergencyExit = row === 1 || row === rows;\r\n                \r\n                rowSeats.push(\r\n                    <div\r\n                        key={`left-${seatNumber}`}\r\n                        className={`seat ${isUnavailable ? 'booked' : ''} ${isSelected ? 'selected' : ''} ${isEmergencyExit ? 'emergency' : ''}`}\r\n                        onClick={() => !isUnavailable && handleSeatSelect(seatNumber)}\r\n                        title={isUnavailable ? 'Already booked' : `Seat ${seatLabel}`}\r\n                    >\r\n                        {seatLabel}\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            // Aisle\r\n            rowSeats.push(<div key={`aisle-${row}`} className=\"aisle\"></div>);\r\n\r\n            // Right side seats (D, E, F)\r\n            for (let seat = 4; seat <= 6; seat++) {\r\n                const seatNumber = (row - 1) * seatsPerRow + seat;\r\n                const seatLabel = `${row}${seatLetters[seat - 1]}`;\r\n                const isUnavailable = unavailableSeats.has(seatNumber);\r\n                const isSelected = selectedSeats.includes(seatNumber);\r\n                const isEmergencyExit = row === 1 || row === rows;\r\n                \r\n                rowSeats.push(\r\n                    <div\r\n                        key={`right-${seatNumber}`}\r\n                        className={`seat ${isUnavailable ? 'booked' : ''} ${isSelected ? 'selected' : ''} ${isEmergencyExit ? 'emergency' : ''}`}\r\n                        onClick={() => !isUnavailable && handleSeatSelect(seatNumber)}\r\n                        title={isUnavailable ? 'Already booked' : `Seat ${seatLabel}`}\r\n                    >\r\n                        {seatLabel}\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            seatMap.push(\r\n                <div key={`row-${row}`} className=\"seat-row\">\r\n                    {rowSeats}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return seatMap;\r\n    };\r\n\r\n    if (!bookingDetails) {\r\n        return (\r\n            <div className=\"error-container\">\r\n                <h3>No Booking Information</h3>\r\n                <p>No booking information found. Please start over.</p>\r\n                <button onClick={() => navigate('/flights')} className=\"retry-button\">\r\n                    Back to Flights\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"seat-selection-page\">\r\n            <div className=\"container\">\r\n                <div className=\"header\">\r\n                    <h1>Select Your Seats</h1>\r\n                    {bookingDetails && (\r\n                        <p>Flight {bookingDetails.flightNumber} - {bookingDetails.departureFrom} to {bookingDetails.arrivalTo}</p>\r\n                    )}\r\n                    <div className={`connection-status ${connected ? 'connected' : 'disconnected'}`}>\r\n                        {connected ? '✅ Connected' : '❌ Disconnected'}\r\n                        <button onClick={initializeWebSocket} className=\"retry-btn\">\r\n                            Retry Connection\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"error-message\">\r\n                        <strong>Error:</strong> {error}\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"debug-info\">\r\n                    <h4>Connection Status</h4>\r\n                    <p><strong>Flight ID:</strong> {bookingDetails.flightId}</p>\r\n                    <p><strong>WebSocket Status:</strong> {connected ? 'Connected' : 'Disconnected'}</p>\r\n                    <p><strong>Server URL:</strong> http://Flight-booking-project-env.eba-wch9wyrn.ap-south-1.elasticbeanstalk.com/ws</p>\r\n                    <p><strong>Debug Info:</strong> {debugInfo}</p>\r\n                    <p><strong>Unavailable Seats:</strong> {Array.from(unavailableSeats).join(', ') || 'None'}</p>\r\n                </div>\r\n\r\n                <div className=\"booking-summary\">\r\n                    <h3>Booking Summary</h3>\r\n                    <div className=\"summary-details\">\r\n                        <p><strong>Booking Reference:</strong> {bookingDetails.bookingReference}</p>\r\n                        <p><strong>Passengers:</strong> {passengerCount}</p>\r\n                        <p><strong>Flight Date:</strong> {bookingDetails.departureDate || 'N/A'}</p>\r\n                        <p><strong>Departure Time:</strong> {bookingDetails.departureTime || 'N/A'}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"seat-selection-container\">\r\n                    <div className=\"airplane-layout\">\r\n                        <div className=\"airplane\">\r\n                            {renderSeatMap()}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"selection-info\">\r\n                        <div className=\"seat-legend\">\r\n                            <h4>Seat Legend</h4>\r\n                            <div className=\"legend-item\">\r\n                                <div className=\"seat available\"></div>\r\n                                <span>Available</span>\r\n                            </div>\r\n                            <div className=\"legend-item\">\r\n                                <div className=\"seat selected\"></div>\r\n                                <span>Selected</span>\r\n                            </div>\r\n                            <div className=\"legend-item\">\r\n                                <div className=\"seat booked\"></div>\r\n                                <span>Unavailable</span>\r\n                            </div>\r\n                            <div className=\"legend-item\">\r\n                                <div className=\"seat emergency\"></div>\r\n                                <span>Emergency Exit</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"selected-seats-info\">\r\n                            <h4>Your Selection</h4>\r\n                            {selectedSeats.length > 0 ? (\r\n                                <div>\r\n                                    <p>Selected Seats: {selectedSeats.map(seat => getSeatDisplay(seat)).join(', ')}</p>\r\n                                    <p>Seat Charges: ₹{selectedSeats.length * seatPrice}</p>\r\n                                </div>\r\n                            ) : (\r\n                                <p>No seats selected yet</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"action-buttons\">\r\n                            <button \r\n                                className=\"btn-back\"\r\n                                onClick={() => navigate(-1)}\r\n                                disabled={loading}\r\n                            >\r\n                                Back to Booking\r\n                            </button>\r\n                            <button \r\n                                className={`btn-confirm ${selectedSeats.length === passengerCount ? '' : 'disabled'}`}\r\n                                onClick={handleConfirmSeats}\r\n                                disabled={selectedSeats.length !== passengerCount || loading}\r\n                            >\r\n                                {loading ? 'Processing...' : `Confirm ${selectedSeats.length}/${passengerCount} Seats`}\r\n                            </button>\r\n                        </div>\r\n\r\n                        {!connected && (\r\n                            <div className=\"connection-warning\">\r\n                                <p>⚠️ WebSocket not connected. Seat availability may not be accurate.</p>\r\n                                <p>You can still select seats and proceed to payment.</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SeatSelectionPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}