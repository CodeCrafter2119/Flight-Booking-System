{"ast":null,"code":"import{useState}from'react';import{Link,useLocation,useNavigate}from'react-router-dom';import{useAuth}from'../security/MainContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginComp(){const navigate=useNavigate();const{state}=useLocation();const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[errorMessage,setErrorMessage]=useState(false);const[isLoading,setIsLoading]=useState(false);const authContext=useAuth();async function handleLogin(){setIsLoading(true);setErrorMessage(false);try{const success=await authContext.login(email,password);if(success){const from=(state===null||state===void 0?void 0:state.from)||'/flights';navigate(from,{replace:true});}else{setErrorMessage(true);}}catch(error){console.error('Login error:',error);setErrorMessage(true);}finally{setIsLoading(false);}}function handleEmail(event){setEmail(event.target.value);}function handlePassword(event){setPassword(event.target.value);}return/*#__PURE__*/_jsxs(\"div\",{className:\"LoginForm\",children:[errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"ErrorMessage\",children:\"Login Failed. Check your credentials.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin login page\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"m-2\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:email,onChange:handleEmail})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"m-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:password,onChange:handlePassword})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success m-3\",onClick:handleLogin,disabled:isLoading,children:isLoading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-center\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register here\"})]})]});}","map":{"version":3,"names":["useState","Link","useLocation","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","LoginComp","navigate","state","email","setEmail","password","setPassword","errorMessage","setErrorMessage","isLoading","setIsLoading","authContext","handleLogin","success","login","from","replace","error","console","handleEmail","event","target","value","handlePassword","className","children","type","name","onChange","onClick","disabled","to"],"sources":["C:/SPRING-BOOT/FlightFrontend/booked-frontend/src/components/LoginComp.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../security/MainContext';\r\n\r\nexport default function LoginComp() {\r\n    const navigate = useNavigate();\r\n    const { state } = useLocation();\r\n    \r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [errorMessage, setErrorMessage] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const authContext = useAuth();\r\n\r\n    async function handleLogin() {\r\n        setIsLoading(true);\r\n        setErrorMessage(false);\r\n        \r\n        try {\r\n            const success = await authContext.login(email, password);\r\n            if (success) {\r\n                const from = state?.from || '/flights';\r\n                navigate(from, { replace: true });\r\n            } else {\r\n                setErrorMessage(true);\r\n            }\r\n        } catch (error) {\r\n            console.error('Login error:', error);\r\n            setErrorMessage(true);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    function handleEmail(event) {\r\n        setEmail(event.target.value);\r\n    }\r\n\r\n    function handlePassword(event) {\r\n        setPassword(event.target.value);\r\n    }\r\n\r\n    return (\r\n        <div className='LoginForm'>\r\n            {errorMessage && (\r\n                <div className='ErrorMessage'>\r\n                    Login Failed. Check your credentials.\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"login\">\r\n                <h1>Admin login page</h1>\r\n                <hr />\r\n                <div>\r\n                    <label className=\"m-2\">Email</label>\r\n                    <input \r\n                        type=\"email\" \r\n                        name='email' \r\n                        value={email} \r\n                        onChange={handleEmail}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label className=\"m-2\">Password</label>\r\n                    <input \r\n                        type=\"password\" \r\n                        name='password' \r\n                        value={password} \r\n                        onChange={handlePassword} \r\n                    />\r\n                </div>\r\n                <button \r\n                    className=\"btn btn-success m-3\" \r\n                    onClick={handleLogin}\r\n                    disabled={isLoading}\r\n                >\r\n                    {isLoading ? 'Logging in...' : 'Login'}\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"mt-3 text-center\">\r\n                Don't have an account? <Link to=\"/register\">Register here</Link>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}