{"ast":null,"code":"var _jsxFileName = \"C:\\\\SPRING-BOOT\\\\FlightFrontend\\\\booked-frontend\\\\src\\\\components\\\\RazorpayPayment.jsx\";\nimport React from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RazorpayPayment = ({\n  orderDetails\n}) => {\n  // Assume orderDetails contains: { orderId, amount, currency, etc. }\n  const {\n    orderId,\n    amount\n  } = orderDetails;\n  const handlePayment = async () => {\n    try {\n      // Load Razorpay script dynamically\n      const script = document.createElement('script');\n      script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\n      script.async = true;\n      document.body.appendChild(script);\n      script.onload = () => {\n        const options = {\n          key: \"rzp_test_l5MXTWsTyrUqwN\",\n          // Replace with your Razorpay test key\n          amount: amount * 100,\n          // Convert to paise (5000 INR → 500000 paise)\n          currency: \"INR\",\n          order_id: orderId,\n          // Use existing order ID from your DB\n          name: \"Flight Booking\",\n          description: \"Payment for your flight booking\",\n          handler: async function (response) {\n            // Call your Spring Boot confirmation endpoint\n            try {\n              await axios.post('http://localhost:8080/confirm-booking', {\n                orderId: response.razorpay_order_id,\n                paymentId: response.razorpay_payment_id,\n                signature: response.razorpay_signature\n              });\n              alert('Payment and booking confirmed successfully!');\n            } catch (error) {\n              console.error('Confirmation failed:', error);\n              alert('Payment succeeded but confirmation failed. Please contact support.');\n            }\n          },\n          prefill: {\n            name: \"Passenger Name\",\n            email: \"passenger@example.com\",\n            contact: \"9876543210\"\n          },\n          theme: {\n            color: \"#3399cc\"\n          }\n        };\n        const rzp = new window.Razorpay(options);\n        rzp.on('payment.failed', response => {\n          alert(`Payment failed: ${response.error.description}`);\n        });\n        rzp.open();\n      };\n    } catch (error) {\n      console.error('Payment initialization failed:', error);\n      alert('Failed to initialize payment');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Complete Payment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Order ID: \", orderId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Amount: \\u20B9\", (amount / 100).toLocaleString('en-IN')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePayment,\n      className: \"pay-button\",\n      children: \"Pay Now\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_c = RazorpayPayment;\nexport default RazorpayPayment;\nvar _c;\n$RefreshReg$(_c, \"RazorpayPayment\");","map":{"version":3,"names":["React","axios","jsxDEV","_jsxDEV","RazorpayPayment","orderDetails","orderId","amount","handlePayment","script","document","createElement","src","async","body","appendChild","onload","options","key","currency","order_id","name","description","handler","response","post","razorpay_order_id","paymentId","razorpay_payment_id","signature","razorpay_signature","alert","error","console","prefill","email","contact","theme","color","rzp","window","Razorpay","on","open","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toLocaleString","onClick","_c","$RefreshReg$"],"sources":["C:/SPRING-BOOT/FlightFrontend/booked-frontend/src/components/RazorpayPayment.jsx"],"sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\n\r\nconst RazorpayPayment = ({ orderDetails }) => {\r\n  // Assume orderDetails contains: { orderId, amount, currency, etc. }\r\n  const { orderId , amount } = orderDetails;\r\n\r\n  const handlePayment = async () => {\r\n    try {\r\n      // Load Razorpay script dynamically\r\n      const script = document.createElement('script');\r\n      script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\r\n      script.async = true;\r\n      document.body.appendChild(script);\r\n \r\n      script.onload = () => {\r\n        const options = {\r\n          key: \"rzp_test_l5MXTWsTyrUqwN\", // Replace with your Razorpay test key\r\n          amount: amount * 100, // Convert to paise (5000 INR → 500000 paise)\r\n          currency: \"INR\",\r\n          order_id: orderId, // Use existing order ID from your DB\r\n          name: \"Flight Booking\",\r\n          description: \"Payment for your flight booking\",\r\n          handler: async function(response) {\r\n            // Call your Spring Boot confirmation endpoint\r\n            try {\r\n              await axios.post('http://localhost:8080/confirm-booking', {\r\n                orderId: response.razorpay_order_id,\r\n                paymentId: response.razorpay_payment_id,\r\n                signature: response.razorpay_signature\r\n              });\r\n              alert('Payment and booking confirmed successfully!');\r\n            } catch (error) {\r\n              console.error('Confirmation failed:', error);\r\n              alert('Payment succeeded but confirmation failed. Please contact support.');\r\n            }\r\n          },\r\n          prefill: {\r\n            name: \"Passenger Name\",\r\n            email: \"passenger@example.com\",\r\n            contact: \"9876543210\"\r\n          },\r\n          theme: {\r\n            color: \"#3399cc\"\r\n          }\r\n        };\r\n\r\n        const rzp = new window.Razorpay(options);\r\n        rzp.on('payment.failed', (response) => {\r\n          alert(`Payment failed: ${response.error.description}`);\r\n        });\r\n        rzp.open();\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('Payment initialization failed:', error);\r\n      alert('Failed to initialize payment');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"payment-container\">\r\n      <h3>Complete Payment</h3>\r\n      <p>Order ID: {orderId}</p>\r\n      <p>Amount: ₹{(amount / 100).toLocaleString('en-IN')}</p>\r\n      <button \r\n        onClick={handlePayment}\r\n        className=\"pay-button\"\r\n      >\r\n        Pay Now\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RazorpayPayment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}